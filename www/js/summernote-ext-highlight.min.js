/*!
 * Summernote Syntax Highlighting
 * http://epiksel.github.io/summernote-ext-highlight/
 * http://e-piksel.com
 * Original Author: http://www.hyl.pw/
 *
 * Released under the MIT license
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){e.extend(e.summernote.plugins,{highlight:function(t){var o=this,i=e.summernote.ui,n=t.layoutInfo.editor,l=t.options;l.langInfo;t.memo("button.highlight",function(){var e=i.button({contents:'<i class="fa fa-file-code-o"></i>',tooltip:"highlight",click:function(){o.show()}}),t=e.render();return t}),this.createDialog=function(){for(var t=e("<div />"),o=e('<div class="form-group" />'),i=e('<div class="form-group" />'),n=e('<select class="form-control ext-highlight-select" />'),l=["css","htm","html","php","java","js","xml","sql","py","rb","apoll","basic","clj","coffee","dart","erlan","go","hs","lasso","lisp","llvm","logta","lua","matla","ml","mumps","n","pasca","perl","proto","r","rd","rust","scala","swift","tcl","tex","vb","vhdl","wiki","xhtml","xq","yaml"],a=0;a<l.length;a++)n.append('<option value="'+l[a]+'">'+l[a]+"</option>");var r=e("<label />");r.html("Select language"),t.append(o.append(r)),t.append(o.append(n));var r=e("<label />");r.html("Enter the code fragment");var d=e('<textarea class="ext-highlight-code form-control" rows="10" />');return t.append(i.append(r)),t.append(i.append(d)),t.html()},this.createCodeNode=function(t,o){var i=e("<code>");i.html(t.replace(/</g,"&lt;").replace(/>/g,"&gt;")),i.addClass("language-"+o);var n=e("<pre>");return n.html(i),n.addClass("prettyprint").addClass("linenums"),n[0]},this.showHighlightDialog=function(n){return e.Deferred(function(e){var l=o.$dialog.find(".ext-highlight-code"),a=o.$dialog.find(".ext-highlight-btn"),r=o.$dialog.find(".ext-highlight-select");i.onDialogShown(o.$dialog,function(){t.triggerEvent("dialog.shown"),l.val(n),l.on("input",function(){i.toggleBtn(a,""!=l.val()),n=l.val()}),a.one("click",function(e){e.preventDefault(),t.invoke("editor.insertNode",o.createCodeNode(n,r.val())),o.$dialog.modal("hide")})}),i.onDialogHidden(o.$dialog,function(){t.triggerEvent("dialog.shown"),e.resolve()}),i.showDialog(o.$dialog)}).promise()},this.getCodeInfo=function(){t.invoke("editor.getSelectedText");return""},this.show=function(){var e=o.getCodeInfo();t.invoke("editor.saveRange"),this.showHighlightDialog(e).then(function(e){t.invoke("editor.restoreRange")})},this.initialize=function(){var t=l.dialogsInBody?e(document.body):n,o=['<button href="#" class="btn btn-primary ext-highlight-btn disabled" disabled>',"Insert code","</button>"].join("");this.$dialog=i.dialog({className:"ext-highlight",title:"Insert code",body:this.createDialog(),footer:o}).render().appendTo(t)},this.destroy=function(){i.hideDialog(this.$dialog),this.$dialog.remove()}}})});